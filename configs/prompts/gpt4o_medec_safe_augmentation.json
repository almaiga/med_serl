{
  "metadata": {
    "version": "2.1",
    "safe_augmentation_strategy": "Use MEDEC errors as-is (doctor-verified). Minimal paraphrasing (1 sentence) for CORRECT. 50/50 split for calibration.",
    "key_principles": [
      "NEVER generate new errors (too risky without MD verification)",
      "Use MEDEC incorrect_note directly (already verified)",
      "Generate CORRECT with MINIMAL paraphrasing (1 sentence only - easy to verify)",
      "50/50 CORRECT/INCORRECT ratio for model calibration",
      "Add reasoning to BOTH CORRECT and INCORRECT (teaches task understanding)",
      "CORRECT reasoning: Why paraphrase is SAFE (preserves facts)",
      "INCORRECT reasoning: Why error is PLAUSIBLE but wrong (deception strategy)",
      "SFT teaches format, RL drives creativity - keep SFT simple!"
    ],
    "why_minimal_paraphrasing": [
      "Easy to verify correctness (hard with heavy paraphrasing)",
      "SFT just teaches task format, not deception",
      "RL phase handles creativity and adversarial learning",
      "Prevents verification errors from complex paraphrasing"
    ]
  },

  "correct_paraphrase_system": "You are a clinical documentation expert creating INTERESTING but SAFE paraphrases for adversarial training.\n\n**Goal:** Make a change that might look suspicious or wrong, but is actually medically equivalent. Train the model to verify carefully!\n\n**Safe Paraphrase Strategies (choose ONE per note):**\n\n1. **Reorder information** (same facts, different sequence):\n   - Move diagnosis after medication\n   - Rearrange symptoms in different order\n   - Change vitals/labs presentation order\n   Example: \"Patient has diabetes, on metformin 1000mg BID\" → \"On metformin 1000mg BID for diabetes management\"\n\n2. **Add redundant context** (implied information made explicit):\n   - Add indication for medication (\"metformin\" → \"metformin for diabetes\")\n   - Add anatomical detail (\"blood pressure 140/90\" → \"brachial blood pressure 140/90 mmHg\")\n   - Expand abbreviation with explanation (\"BID\" → \"twice daily (BID)\")\n\n3. **Medical/lay term swap** (same symptom, different terminology):\n   - \"shortness of breath\" ↔ \"dyspnea\"\n   - \"high blood sugar\" ↔ \"hyperglycemia\"\n   - \"heart attack\" ↔ \"myocardial infarction\"\n\n4. **Format change** (same data, different presentation):\n   - Telegraphic → full sentences (\"BP 140/90\" → \"Blood pressure is 140/90 mmHg\")\n   - List → narrative (\"Symptoms: cough, fever\" → \"Patient reports cough and fever\")\n\n5. **Temporal rephrasing** (same timeline, different expression):\n   - \"3 days ago\" → \"72 hours prior to presentation\"\n   - \"for 1 week\" → \"over a 7-day period\"\n   - \"started yesterday\" → \"initiated 24 hours ago\"\n\n6. **Unit conversion** (same value, different units):\n   - \"Weight 70 kg\" → \"Weight 154 lbs\"\n   - \"Temp 37.8°C\" → \"Temp 100°F\"\n   - Note: Only use if both units are medically standard\n\n**CRITICAL: Preserve exactly:**\n- Numerical values (can change format/units but not value)\n- Medication facts (can add context but not change drug/dose/frequency)\n- Diagnoses (can swap medical/lay terms for SAME condition)\n- Timeline (can change units but not duration)\n\n**Make it INTERESTING:** Model should need to THINK to verify it's safe, not just spot trivial synonyms like \"note→observe\".\n\n**Output:** Only the modified note. No explanations.",

  "correct_paraphrase_user": "Make an INTERESTING but SAFE change to this note. Use one of these strategies:\n- Reorder information\n- Add redundant medical context\n- Swap medical/lay terminology\n- Change format/presentation\n- Temporal rephrasing\n- Unit conversion (if standard)\n\nGoal: Make model THINK to verify it's safe (not trivial like \"note→observe\").\n\n**Note:**\n{note}\n\n**Output:** Only the modified note. No explanations.",

  "correct_reasoning_system": "You are a medical AI training expert explaining safe paraphrasing strategies.\n\n**Context:** You're teaching a model how to make SAFE changes that preserve medical accuracy.\n\n**Task:** Given a paraphrased note, explain why the change is safe:\n1. **What was changed** - The specific paraphrase\n2. **Why it's safe** - What medical facts were preserved\n3. **What stayed the same** - Critical elements unchanged\n4. **Paraphrase strategy** - What technique was used\n\n**Perspective:** Write from the PARAPHRASER's viewpoint (\"I changed X to Y, but preserved...\")\n\n**Output JSON:**\n```json\n{\n  \"change_made\": \"[What specific text was changed]\",\n  \"why_safe\": \"[Why this change preserves medical accuracy]\",\n  \"preserved_facts\": [\"Fact 1 preserved exactly\", \"Fact 2\", \"Fact 3\"],\n  \"paraphrase_technique\": \"[Strategy used: synonym, restructure, style change, etc.]\",\n  \"medical_equivalence\": \"[Why both versions mean the same thing medically]\"\n}\n```\n\n**Example Safe Paraphrase Reasoning:**\n\"I changed 'Patient has type 2 diabetes' to 'Patient presents with type 2 diabetes'. This is safe because: (1) the diagnosis remains exactly the same (type 2 diabetes), (2) only the verb changed (has → presents with), which are medically equivalent ways to state a diagnosis, (3) no clinical facts were altered. This is a simple synonym substitution.\"",

  "correct_reasoning_user": "Explain why this paraphrase is SAFE:\n\n**Original note:**\n{original_note}\n\n**Paraphrased note:**\n{paraphrased_note}\n\nExplain from the PARAPHRASER's perspective:\n- What did I change?\n- Why is this change safe (preserves medical facts)?\n- What critical facts stayed the same?\n- What paraphrase technique did I use?\n\nOutput in JSON format:",

  "reasoning_system": "You are a medical AI training expert explaining error injection strategies.\n\n**Context:** You're teaching an injector model HOW and WHY to make realistic medical errors.\n\n**Task:** Given a clinical note pair (correct vs incorrect), explain the injector's reasoning:\n1. **What change was made** - The specific injection\n2. **Why this error is plausible** - Why it looks realistic\n3. **What makes it deceptive** - Why it might fool an assessor\n4. **Clinical context** - Why this error could happen in practice\n5. **Detection difficulty** - What clues assessor needs to catch it\n\n**Perspective:** Write from the INJECTOR's viewpoint (\"I changed X to Y because...\")\n\n**Output JSON:**\n```json\n{\n  \"injection_strategy\": \"[What specific change was made]\",\n  \"why_plausible\": \"[Why this error looks realistic and could fool assessor]\",\n  \"deception_technique\": \"[What makes this error subtle/hard to detect]\",\n  \"clinical_reasoning\": \"[Why this error might occur in real practice]\",\n  \"detection_clues\": [\"Clue 1 assessor needs\", \"Clue 2\", \"Clue 3\"],\n  \"error_type_pattern\": \"[General pattern: e.g., 'similar diagnoses', 'drug class confusion']\"\n}\n```\n\n**Example Injector Reasoning:**\n\"I changed 'Huntington disease' to 'Creutzfeldt-Jakob disease' because both cause movement disorders and cognitive decline, making them easy to confuse. The deception works because without carefully checking the family history (suicide at 50 = genetic Huntington), they look similar. This is a realistic error - both are rare neurodegenerative diseases with overlapping symptoms.\"",

  "reasoning_user": "Explain the injector's strategy for this error:\n\n**Original (correct) note:**\n{correct_note}\n\n**Injected (incorrect) note:**\n{incorrect_note}\n\n**What was changed:** {error_sentence} → {corrected_sentence}\n**Error type:** {error_type}\n\nExplain from the INJECTOR's perspective:\n- What change did I make?\n- Why is this error plausible/deceptive?\n- Why might this fool an assessor?\n- What pattern does this follow?\n\nOutput in JSON format:",

  "sft_data_generation": {
    "description": "Generate 50/50 CORRECT/INCORRECT training data from MEDEC",
    "process": [
      "1. Load MEDEC pairs (each has correct_note and incorrect_note)",
      "2. For CORRECT examples: Use GPT-4o to paraphrase correct_note (safe - no medical risk)",
      "3. For INCORRECT examples: Use MEDEC incorrect_note AS-IS (already doctor-verified)",
      "4. Optional: Add reasoning to INCORRECT examples (explain why error is wrong)",
      "5. Output: 50% CORRECT paraphrases, 50% INCORRECT from MEDEC",
      "6. Label format: {\"note\": \"...\", \"label\": \"CORRECT\"/\"INCORRECT\", \"reasoning\": \"...\"}"
    ],
    "rationale": {
      "why_safe": "Only paraphrase CORRECT notes (no medical risk). Use MEDEC errors as-is (doctor-verified).",
      "why_50_50": "Balanced dataset prevents model from biasing toward CORRECT or INCORRECT",
      "why_no_new_errors": "Generating errors requires MD verification - too risky and expensive"
    }
  },

  "output_format": {
    "correct_example": {
      "note": "[Paraphrased clinical note from GPT-4o]",
      "label": "CORRECT",
      "original_note_id": "ms-train-418",
      "source": "medec_correct_paraphrased",
      "reasoning": {
        "change_made": "Changed 'Patient has type 2 diabetes' to 'Patient presents with type 2 diabetes'",
        "why_safe": "Only the verb changed (has → presents with), diagnosis and all medical facts preserved exactly",
        "preserved_facts": ["Diagnosis: type 2 diabetes", "All medications unchanged", "All lab values unchanged"],
        "paraphrase_technique": "Synonym substitution for verb (medically equivalent phrasing)",
        "medical_equivalence": "Both 'has' and 'presents with' indicate the patient's current diagnosis - no change in clinical meaning"
      }
    },
    "incorrect_example": {
      "note": "[MEDEC incorrect_note AS-IS]",
      "label": "INCORRECT",
      "original_note_id": "ms-train-418",
      "error_type": "diagnosis",
      "error_location": "Suspected of Creutzfeldt-Jakob disease.",
      "correction": "Suspected of Huntington disease.",
      "source": "medec_incorrect_verified",
      "reasoning": {
        "error_identified": "Misdiagnosis: CJD instead of Huntington",
        "why_wrong": "Family history of father suicide at 50 suggests genetic Huntington (autosomal dominant, typical onset 30s-50s). Choreiform movements and 1-year insidious progression fit Huntington, not CJD (which is rapid, weeks-months). Key clue: genetic pattern in family.",
        "key_clues": ["Father suicide at 50 (Huntington genetic)", "1-year progression (Huntington insidious, CJD rapid)", "Choreiform movements (Huntington)"],
        "correct_answer": "Huntington disease: autosomal dominant, chorea + psychiatric + cognitive decline, genetic family history",
        "clinical_impact": "Wrong diagnosis affects genetic counseling, family screening, prognosis, and support planning"
      }
    }
  },

  "generation_params": {
    "correct_paraphrase": {
      "temperature": 0.7,
      "top_p": 0.9,
      "max_tokens": 2048,
      "note": "Moderate temperature for interesting but safe paraphrasing (make model think!)"
    },
    "reasoning": {
      "temperature": 0.3,
      "top_p": 0.9,
      "max_tokens": 1024,
      "note": "Lower temperature for accurate medical reasoning"
    }
  },

  "quality_checks": {
    "for_correct_paraphrases": [
      "All numbers preserved exactly (labs, vitals, ages, doses)",
      "All medications preserved exactly",
      "All diagnoses preserved exactly",
      "Substantial variation in wording (not copy-paste)",
      "Natural, fluent clinical writing"
    ],
    "for_incorrect_medec": [
      "Use AS-IS from MEDEC (already verified)",
      "Do NOT modify or edit",
      "Do NOT try to \"fix\" or \"improve\"",
      "Trust MEDEC curation"
    ]
  },

  "example_generation": {
    "input_medec_pair": {
      "note_id": "ms-train-418",
      "correct_note": "A 42-year-old woman... Suspected of Huntington disease...",
      "incorrect_note": "A 42-year-old woman... Suspected of Creutzfeldt-Jakob disease...",
      "error_type": "diagnosis"
    },
    "output_sft_data": [
      {
        "note": "[GPT-4o paraphrase of correct_note]",
        "label": "CORRECT",
        "note_id": "ms-train-418",
        "source": "medec_correct_paraphrased"
      },
      {
        "note": "A 42-year-old woman... Suspected of Creutzfeldt-Jakob disease...",
        "label": "INCORRECT",
        "note_id": "ms-train-418",
        "error_type": "diagnosis",
        "source": "medec_incorrect_verified",
        "reasoning": {
          "injection_strategy": "Changed diagnosis from 'Huntington disease' to 'Creutzfeldt-Jakob disease'",
          "why_plausible": "Both are neurodegenerative diseases causing movement disorders, cognitive decline, and psychiatric symptoms - easy to confuse without careful analysis",
          "deception_technique": "The symptoms overlap significantly: both have abnormal movements, behavioral changes, and dementia. Without checking family history closely, they appear similar.",
          "clinical_reasoning": "This error occurs in practice because both are rare, both affect movement and cognition, and clinicians may anchor on prominent symptoms (movements, behavior) without fully considering timeline and genetics.",
          "detection_clues": ["Family history of suicide at 50 (Huntington is genetic, autosomal dominant)", "1-year insidious progression (Huntington), not rapid weeks-months (CJD)", "Choreiform movements more typical of Huntington"],
          "error_type_pattern": "Similar disease presentations - requires differential diagnosis based on subtle distinguishing features"
        }
      }
    ]
  }
}
