{
  "metadata": {
    "version": "2.0",
    "safe_augmentation_strategy": "Use MEDEC errors as-is (doctor-verified). Minimal paraphrasing (1 sentence) for CORRECT. 50/50 split for calibration.",
    "key_principles": [
      "NEVER generate new errors (too risky without MD verification)",
      "Use MEDEC incorrect_note directly (already verified)",
      "Generate CORRECT with MINIMAL paraphrasing (1 sentence only - easy to verify)",
      "50/50 CORRECT/INCORRECT ratio for model calibration",
      "Optional: Add reasoning to explain WHY errors are wrong (educational)",
      "SFT teaches format, RL drives creativity - keep SFT simple!"
    ],
    "why_minimal_paraphrasing": [
      "Easy to verify correctness (hard with heavy paraphrasing)",
      "SFT just teaches task format, not deception",
      "RL phase handles creativity and adversarial learning",
      "Prevents verification errors from complex paraphrasing"
    ]
  },

  "correct_paraphrase_system": "You are a clinical documentation expert creating minimal paraphrases of medical notes for SFT training.\n\n**Task:** Make a SMALL change to this clinical note - paraphrase ONE sentence only.\n\n**Strategy:**\n- Choose ONE sentence to paraphrase (preferably not diagnosis/medication lines)\n- Keep everything else EXACTLY the same\n- The paraphrased sentence must preserve all medical facts\n\n**Why minimal changes:**\n- Easy to verify correctness\n- SFT just teaches task format\n- RL phase will handle creativity and deception\n\n**Critical Preservation (MUST be exact):**\n- All numerical values (labs, vitals, ages, doses, measurements, units)\n- All medications (drug names, doses, routes, frequencies)\n- All diagnoses and clinical assessments\n- All temporal information (durations, dates, sequences)\n\n**Example:**\nOriginal: \"Patient has type 2 diabetes. Started on metformin 1000mg BID. HbA1c is 7.2%.\"\nParaphrase ONE sentence: \"Patient presents with type 2 diabetes. Started on metformin 1000mg BID. HbA1c is 7.2%.\"\n                          ↑ Only this changed\n\n**Output:** Only the modified note. No explanations.",

  "correct_paraphrase_user": "Paraphrase ONE sentence only in this clinical note. Keep everything else identical.\n\n{note}\n\nOutput only the modified note:",

  "reasoning_system": "You are a medical educator explaining clinical errors.\n\n**Task:** Given a clinical note pair (correct vs incorrect), explain:\n1. What the error is\n2. Why it's wrong (clinical reasoning)\n3. Key clues to detect it\n4. Clinical impact\n\n**Output JSON:**\n```json\n{\n  \"error_identified\": \"[What was wrong]\",\n  \"why_wrong\": \"[Clinical reasoning - WHY this is incorrect]\",\n  \"key_clues\": [\"Clue 1\", \"Clue 2\", \"Clue 3\"],\n  \"correct_answer\": \"[Why the correct version is right]\",\n  \"clinical_impact\": \"[Potential harm if error missed]\"\n}\n```",

  "reasoning_user": "Explain this medical error:\n\n**Incorrect (with error):**\n{incorrect_note}\n\n**Correct:**\n{correct_note}\n\n**Error location:** {error_sentence} → {corrected_sentence}\n\nExplain in JSON format:",

  "sft_data_generation": {
    "description": "Generate 50/50 CORRECT/INCORRECT training data from MEDEC",
    "process": [
      "1. Load MEDEC pairs (each has correct_note and incorrect_note)",
      "2. For CORRECT examples: Use GPT-4o to paraphrase correct_note (safe - no medical risk)",
      "3. For INCORRECT examples: Use MEDEC incorrect_note AS-IS (already doctor-verified)",
      "4. Optional: Add reasoning to INCORRECT examples (explain why error is wrong)",
      "5. Output: 50% CORRECT paraphrases, 50% INCORRECT from MEDEC",
      "6. Label format: {\"note\": \"...\", \"label\": \"CORRECT\"/\"INCORRECT\", \"reasoning\": \"...\"}"
    ],
    "rationale": {
      "why_safe": "Only paraphrase CORRECT notes (no medical risk). Use MEDEC errors as-is (doctor-verified).",
      "why_50_50": "Balanced dataset prevents model from biasing toward CORRECT or INCORRECT",
      "why_no_new_errors": "Generating errors requires MD verification - too risky and expensive"
    }
  },

  "output_format": {
    "correct_example": {
      "note": "[Paraphrased clinical note from GPT-4o]",
      "label": "CORRECT",
      "original_note_id": "ms-train-418",
      "source": "medec_correct_paraphrased",
      "reasoning": null
    },
    "incorrect_example": {
      "note": "[MEDEC incorrect_note AS-IS]",
      "label": "INCORRECT",
      "original_note_id": "ms-train-418",
      "error_type": "diagnosis",
      "error_location": "Suspected of Creutzfeldt-Jakob disease.",
      "correction": "Suspected of Huntington disease.",
      "source": "medec_incorrect_verified",
      "reasoning": {
        "error_identified": "Misdiagnosis: CJD instead of Huntington",
        "why_wrong": "Family history of father suicide at 50 suggests genetic Huntington (autosomal dominant, typical onset 30s-50s). Choreiform movements and 1-year insidious progression fit Huntington, not CJD (which is rapid, weeks-months). Key clue: genetic pattern in family.",
        "key_clues": ["Father suicide at 50 (Huntington genetic)", "1-year progression (Huntington insidious, CJD rapid)", "Choreiform movements (Huntington)"],
        "correct_answer": "Huntington disease: autosomal dominant, chorea + psychiatric + cognitive decline, genetic family history",
        "clinical_impact": "Wrong diagnosis affects genetic counseling, family screening, prognosis, and support planning"
      }
    }
  },

  "generation_params": {
    "correct_paraphrase": {
      "temperature": 0.5,
      "top_p": 0.9,
      "max_tokens": 2048,
      "note": "Low temperature for minimal, controlled paraphrasing (1 sentence only)"
    },
    "reasoning": {
      "temperature": 0.3,
      "top_p": 0.9,
      "max_tokens": 1024,
      "note": "Lower temperature for accurate medical reasoning"
    }
  },

  "quality_checks": {
    "for_correct_paraphrases": [
      "All numbers preserved exactly (labs, vitals, ages, doses)",
      "All medications preserved exactly",
      "All diagnoses preserved exactly",
      "Substantial variation in wording (not copy-paste)",
      "Natural, fluent clinical writing"
    ],
    "for_incorrect_medec": [
      "Use AS-IS from MEDEC (already verified)",
      "Do NOT modify or edit",
      "Do NOT try to \"fix\" or \"improve\"",
      "Trust MEDEC curation"
    ]
  },

  "example_generation": {
    "input_medec_pair": {
      "note_id": "ms-train-418",
      "correct_note": "A 42-year-old woman... Suspected of Huntington disease...",
      "incorrect_note": "A 42-year-old woman... Suspected of Creutzfeldt-Jakob disease...",
      "error_type": "diagnosis"
    },
    "output_sft_data": [
      {
        "note": "[GPT-4o paraphrase of correct_note]",
        "label": "CORRECT",
        "note_id": "ms-train-418",
        "source": "medec_correct_paraphrased"
      },
      {
        "note": "A 42-year-old woman... Suspected of Creutzfeldt-Jakob disease...",
        "label": "INCORRECT",
        "note_id": "ms-train-418",
        "error_type": "diagnosis",
        "source": "medec_incorrect_verified",
        "reasoning": {
          "error_identified": "Misdiagnosis: CJD instead of Huntington",
          "why_wrong": "Family history of father suicide at 50 suggests genetic Huntington",
          "key_clues": ["Father suicide at 50", "1-year progression", "Choreiform movements"],
          "correct_answer": "Huntington disease",
          "clinical_impact": "Wrong diagnosis affects genetic counseling"
        }
      }
    ]
  }
}
