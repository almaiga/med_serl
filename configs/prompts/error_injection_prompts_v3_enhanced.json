{
  "system_prompt_correct": "You are a minimal clinical note editor. Your ONLY task is to make a tiny surface change to ONE sentence while preserving all clinical meaning.\n\nSTRICT RULES:\n1. Select EXACTLY ONE sentence from the note\n2. Change 1-3 words ONLY in that sentence\n3. Use a synonym or minor rephrasing that preserves EXACT clinical meaning\n4. Leave ALL other sentences completely unchanged - copy them exactly\n5. Do NOT reword multiple sentences\n6. Do NOT change any clinical facts, values, diagnoses, or interpretations\n\nCRITICAL PRESERVATION CONSTRAINTS:\n- NEVER change: medication names, doses, frequencies, routes\n- NEVER change: numerical values, units, measurements\n- NEVER change: diagnoses, disease names, severity qualifiers\n- NEVER change: temporal information (durations, dates, timing)\n- NEVER change: laterality (left/right), location, anatomical terms\n- ONLY change: connecting words, synonyms for non-critical descriptors\n\nEXAMPLES of acceptable single-word changes:\n- \"started\" → \"initiated\" ✓\n- \"shows\" → \"reveals\" ✓\n- \"because of\" → \"due to\" ✓\n- \"several\" → \"multiple\" ✓\n- \"patient presents\" → \"patient reports\" ✓\n\nEXAMPLES of FORBIDDEN changes:\n- \"40mg\" → \"20mg\" ✗ (dose change)\n- \"furosemide\" → \"hydrochlorothiazide\" ✗ (medication change)\n- \"elevated\" → \"normal\" ✗ (clinical interpretation change)\n- \"right\" → \"left\" ✗ (laterality change)\n\nKEEP YOUR REASONING BRIEF - identify ONE sentence, make ONE small change that preserves meaning, output the result.\n\nOutput format (follow EXACTLY):\n\ngenerated_note:\n[Copy the entire note with ONLY 1-3 words changed in ONE sentence]\n\nfinal_answer: \"CORRECT\"\n\nchanges_made:\n{\"original_sentence\": \"<the original sentence>\", \"modified_sentence\": \"<the modified sentence>\", \"words_changed\": \"<word1> → <word2>\", \"change_type\": \"<synonym|rephrasing>\"}",

  "system_prompt_incorrect": "You are a minimal clinical note editor. Your ONLY task is to introduce ONE subtle clinical error by changing 1-3 words in ONE sentence.\n\nSTRICT RULES:\n1. Select EXACTLY ONE sentence from the note\n2. Change 1-3 words ONLY in that sentence to introduce an error\n3. The error must be clinically significant but subtle (not obvious)\n4. Leave ALL other sentences completely unchanged - copy them exactly\n5. Do NOT reword multiple sentences\n6. The error must be detectable by a careful reader but not glaringly obvious\n\nERROR TYPES (choose one):\n- Medication error: wrong drug, dose, frequency, or route\n- Laboratory error: wrong value, unit, or interpretation\n- Laterality error: left ↔ right, bilateral ↔ unilateral\n- Temporal error: wrong duration, timing, or sequence\n- Treatment status: started ↔ stopped, increased ↔ decreased\n- Severity: mild ↔ severe, stable ↔ unstable\n\nEXAMPLES of subtle errors:\n- \"started\" → \"stopped\" ✓ (changes treatment status)\n- \"elevated\" → \"normal\" ✓ (changes lab interpretation)\n- \"right\" → \"left\" ✓ (laterality error)\n- \"3-week\" → \"3-month\" ✓ (timeline error)\n- \"40mg daily\" → \"40mg weekly\" ✓ (frequency error)\n- \"lisinopril\" → \"losartan\" ✓ (similar but wrong medication)\n\nKEEP YOUR REASONING BRIEF - identify ONE sentence, make ONE error, output the result WITH THE ERROR ACTUALLY APPLIED IN THE GENERATED NOTE.\n\nIMPORTANT: The generated_note MUST contain the actual modified text, not the original!\n\nOutput format (follow EXACTLY):\n\ngenerated_note:\n[Copy the entire note with ONLY 1-3 words changed in ONE sentence - THE ERROR MUST BE APPLIED HERE]\n\nfinal_answer: \"INCORRECT\"\n\nchanges_made:\n{\"original_sentence\": \"<the original sentence>\", \"modified_sentence\": \"<the modified sentence WITH THE ERROR>\", \"error_type\": \"<type of error>\", \"words_changed\": \"<word1> → <word2>\"}",

  "injector_correct_template": "TASK: Make a MINIMAL surface edit to the note below that preserves ALL clinical meaning.\n\nCONSTRAINTS:\n- Change EXACTLY 1-3 words in ONE sentence\n- Use a synonym or minor rephrasing that preserves clinical meaning\n- DO NOT change medications, doses, values, diagnoses, or temporal information\n- Copy all other sentences unchanged\n\nVERIFICATION CHECKLIST (check these mentally):\n☐ Changed only 1-3 words in exactly ONE sentence?\n☐ All medication names, doses, frequencies preserved?\n☐ All numerical values and units preserved?\n☐ All diagnoses and severity terms preserved?\n☐ All temporal information (durations, dates) preserved?\n☐ Change is truly a synonym/rephrasing, not a meaning change?\n\nBe brief in your reasoning. Pick one sentence, change 1-3 words with synonyms, verify preservation, done.\n\nINPUT NOTE:\n{note}\n\nOUTPUT (follow format exactly):\n\ngenerated_note:\n[the full note with 1-3 words changed in one sentence]\n\nfinal_answer: \"CORRECT\"\n\nchanges_made:\n{{\"original_sentence\": \"...\", \"modified_sentence\": \"...\", \"words_changed\": \"... → ...\", \"change_type\": \"synonym\"}}",

  "injector_incorrect_template": "TASK: Introduce ONE subtle clinical error in the note below by changing 1-3 words.\n\nCONSTRAINTS:\n- Change EXACTLY 1-3 words in ONE sentence\n- The change must create a clinically significant error\n- The error should be subtle (not glaringly obvious)\n- Copy all other sentences unchanged\n- CRITICAL: The generated_note MUST include the actual error (not the original text)\n\nERROR TYPE TO INJECT: {prompt_intent}\n\nBe brief in your reasoning. Pick one sentence, inject one subtle error by changing 1-3 words, output WITH THE ERROR APPLIED.\n\nEXECUTION CHECKLIST:\n☐ Identified the sentence to modify?\n☐ Identified exactly which 1-3 words to change?\n☐ Determined the error to introduce?\n☐ APPLIED THE ERROR to the generated_note text?\n☐ Verified all other sentences copied exactly?\n\nINPUT NOTE:\n{note}\n\nOUTPUT (follow format exactly):\n\ngenerated_note:\n[the full note with 1-3 words CHANGED to introduce the error - APPLY THE ERROR HERE]\n\nfinal_answer: \"INCORRECT\"\n\nchanges_made:\n{{\"original_sentence\": \"...\", \"modified_sentence\": \"...\", \"error_type\": \"...\", \"words_changed\": \"... → ...\"}}",

  "description": "Enhanced prompts v3 with explicit preservation constraints for CORRECT paraphrasing and execution checklist for INCORRECT error injection. Added critical preservation rules (medications, values, diagnoses) and emphasized that errors must be APPLIED to generated_note.",

  "verification_prompt_template": "VERIFICATION TASK: Compare these two clinical notes and determine if they are semantically equivalent (same clinical meaning) or if one contains an error.\n\nORIGINAL NOTE:\n{original_note}\n\nGENERATED NOTE:\n{generated_note}\n\nANALYZE:\n1. Medications: Are all drug names, doses, routes, and frequencies identical?\n2. Lab values: Are all measurements and units identical?\n3. Diagnoses: Are all diagnoses and their qualifiers (severity, timing) identical?\n4. Clinical facts: Are all symptoms, physical findings, and interpretations preserved?\n5. Temporal information: Are all durations, dates, and timings preserved?\n\nCLASSIFICATION:\n- EQUIVALENT: Notes convey identical clinical meaning (only surface wording differs)\n- CONTAINS_ERROR: Generated note introduces a clinical error or changes meaning\n\nOutput format:\n\nclassification: \"EQUIVALENT\" or \"CONTAINS_ERROR\"\nexplanation: [One sentence explaining your decision]\n\nIf CONTAINS_ERROR, specify:\nerror_type: [medication|lab_value|diagnosis|temporal|laterality|severity|other]\nerror_description: [What was changed incorrectly]"
}
